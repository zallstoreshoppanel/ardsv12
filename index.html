<!DOCTYPE html><html lang="id">
<head>
  <meta charset="UTF-8" />
  <!-- Anti-zoom -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"/>
  <title>ARDS V14 • Portal</title>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg-0:#0b0e1a; --bg-1:#0f1224; --bg-2:#121735;
      --tx-1:#e8f0ff; --tx-2:#9aa6c7;
      --ac-1:#7b5cff; --ac-2:#4ad0ff;
      --ok:#23d18b; --warn:#ffb020;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0; font-family:Outfit,system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,'Helvetica Neue',Arial;
      color:var(--tx-1);
      background:
        radial-gradient(1200px 800px at 20% -10%, #6f2cff22, transparent 60%),
        radial-gradient(900px 600px at 80% -10%, #00d4ff22, transparent 60%),
        radial-gradient(1200px 900px at 50% 120%, #1a256644, transparent 60%),
        linear-gradient(180deg,#0b0e1a 0%,#0c1122 60%,#0a0f1f 100%);
      overflow:hidden;
      touch-action: manipulation;
      -webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; user-select:none;
    }
    input, select, .allow-select{ -webkit-user-select:text; user-select:text; }

    /* stars ringan */
    .stars,.stars:before,.stars:after{
      position:fixed; inset:0; content:""; pointer-events:none; z-index:0;
      background:transparent url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" width="2" height="2"><circle cx="1" cy="1" r="1" fill="white"/></svg>') repeat;
      opacity:.10; animation: drift 140s linear infinite;
    }
    .stars:before{animation-duration:180s; opacity:.08}
    .stars:after{animation-duration:220s; opacity:.06}
    @keyframes drift{from{transform:translateY(0)} to{transform:translateY(1200px)}}

    /* ===== LOGIN ===== */
    .auth-wrap{position:fixed;inset:0;display:grid;place-items:center;z-index:30}
    .auth-card{
      width:min(520px,92%); border-radius:22px;
      background:linear-gradient(180deg,#101733,#0d142b);
      border:1px solid #1c2652; box-shadow:0 30px 80px #000a, inset 0 1px 0 #2a356a55;
      padding:22px;
    }
    .auth-header{display:flex;flex-direction:column;align-items:center;gap:.45rem;margin-bottom:.8rem}
    .auth-logo{width:66px;height:66px;border-radius:16px;background:#0d1430;display:grid;place-items:center;
      box-shadow:0 6px 18px #0008, inset 0 0 0 6px #0c1230;}
    .title{font-size:1.45rem;font-weight:800;letter-spacing:.02em}
    .subtitle{color:var(--tx-2);text-align:center;margin-top:-6px;font-size:.86rem}
    .field{margin:.65rem 0}
    .label{font-size:.8rem;color:var(--tx-2);display:flex;align-items:center;gap:.5rem;margin-bottom:.3rem}
    .label svg{width:15px;height:15px}
    .ipt{display:flex;align-items:center;gap:.55rem;background:#0e1533;border:1px solid #1b2552;color:var(--tx-1);
      padding:.72rem .85rem;border-radius:14px;}
    .ipt input{all:unset;flex:1;color:var(--tx-1);font-size:.95rem}
    .remember{display:flex;align-items:center;gap:.45rem;color:var(--tx-2);margin:.35rem 0 .65rem;font-size:.9rem}
    .remember input{accent-color:#6f89ff; width:16px; height:16px}
    .btn-grad{
      width:100%; border:0; cursor:pointer; font-weight:800; letter-spacing:.02em;
      color:white; padding:12px 14px; border-radius:14px;
      background:linear-gradient(90deg,var(--ac-1),var(--ac-2));
      box-shadow:0 10px 24px #0008, 0 0 0 1px #2d3a7a inset;
      transition:transform .08s ease, box-shadow .15s ease; font-size:.95rem
    }
    .btn-grad:active{transform:translateY(1px)}
    .muted-center{color:var(--tx-2);text-align:center;margin-top:14px;font-size:.82rem}

    /* ===== APP (compact) ===== */
    .phone{max-width:860px;margin:0 auto;width:100%}
    .app{position:relative;z-index:1;height:100%;display:grid;grid-template-rows:auto 1fr auto;}
    .topbar{
      display:flex;align-items:center;gap:.6rem;padding:.7rem .9rem;background:linear-gradient(180deg,#11183a,#0b122a);
      border-bottom:1px solid #1b244a; box-shadow:0 8px 22px #0006;
    }
    .brand{font-weight:800;letter-spacing:.06em;font-size:1rem}
    .content{overflow:auto;padding:clamp(.7rem,2.5vw,.95rem)}
    .panel{background:linear-gradient(180deg,#11183a,#0e1633);border:1px solid #1b2550;border-radius:16px;box-shadow:0 12px 30px #0008}
    .hero{position:relative;overflow:hidden}
    .hero img{display:block;width:100%;height:clamp(140px,24vw,200px);object-fit:cover;filter:saturate(1.05)}
    .hero:after{content:"";position:absolute;inset:0;background:linear-gradient(180deg,rgba(12,18,40,.35),rgba(12,18,40,.85))}
    /* — quick buttons DIHAPUS — */

    .cards{display:grid;gap:.7rem}
    .card{padding:.8rem;border-radius:14px;background:#0f1736;border:1px solid #1d2a57}
    .stat{display:flex;align-items:center;justify-content:space-between;padding:.55rem .7rem;border-radius:10px;background:#0e1633;border:1px solid #233064;margin-bottom:.45rem}
    .status-dot{width:9px;height:9px;border-radius:50%;background:var(--ok);box-shadow:0 0 10px var(--ok)}
    .card h3{margin:.1rem 0 .5rem;font-size:.92rem;color:#cfe0ff}

    .bottombar{display:grid;grid-template-columns:repeat(5,1fr);gap:.3rem;padding:.4rem;background:linear-gradient(0deg,#0b1124,#0e1530);border-top:1px solid #1b2446}
    .tab{display:flex;flex-direction:column;align-items:center;gap:.2rem;padding:.45rem 0;border-radius:10px;color:#a9bbdd;border:1px solid transparent}
    .tab.active{background:#0f1736;border-color:#1d2a57;color:#dfe8ff}
    .tab svg{width:18px;height:18px}
    .tab small{font-size:.64rem}

    .page{display:none}.page.active{display:block}

    /* ===== Modal Progress / Success ===== */
    .modal{position:fixed;inset:0;display:none;place-items:center;z-index:60;background:#0008}
    .modal.show{display:grid}
    .modal-card{width:min(520px,92%);background:#0f1736;border:1px solid #1d2a57;border-radius:18px;padding:1rem;text-align:center;box-shadow:0 24px 60px #000c}
    .progress{height:12px;background:#0e1633;border:1px solid #233064;border-radius:10px;overflow:hidden;margin:.4rem 0}
    .progress i{display:block;height:100%;width:0;background:linear-gradient(90deg,var(--ac-1),var(--ac-2))}
    .meta{display:flex;justify-content:space-between;color:var(--tx-2);margin:.4rem 0 .2rem;font-size:.82rem}
    .indicator{margin-top:.35rem;padding:.5rem;border:1px solid #233064;border-radius:10px;background:#0e1633}
    .btn-close{margin-top:.5rem;border:0;padding:.55rem .9rem;border-radius:12px;background:#101a3d;color:#e6f0ff;border:1px solid #20306b;cursor:pointer}

    /* ===== Notif feed ===== */
    .feed{position:absolute; left:10px; bottom:58px; width:min(92%, 380px); display:flex; flex-direction:column; gap:.5rem; z-index:20; pointer-events:none;}
    .note{pointer-events:auto;background:linear-gradient(180deg,#0f1a30,#0e1224); color:#dff6ea;border:1px solid #224254; border-left:3px solid #14c27f;border-radius:14px; padding:.7rem .75rem; box-shadow:0 12px 28px #0008; transform:translateY(10px); opacity:0; animation:flyin .35s ease forwards; font-size:.9rem}
    .note .top{display:flex;justify-content:space-between;align-items:center;margin-bottom:.25rem}
    .note .tag{display:flex;align-items:center;gap:.4rem;color:#6cf7b1;font-weight:700}
    .note .tag svg{width:16px;height:16px}
    .note .when{color:#87a3b3;font-size:.78rem}
    .note .msg{color:#e8fff6}
    @keyframes flyin{to{transform:translateY(0);opacity:1}}
    .note.hide{animation:flyout .25s ease forwards}
    @keyframes flyout{to{transform:translateY(10px);opacity:0}}

    /* phone frame */
    @media (min-width:560px){
      body{display:grid;place-items:center}
      .phone{width:min(100%,420px);height:820px;background:#09101e;border-radius:28px;box-shadow:0 25px 80px #0007;border:1px solid #152046;overflow:hidden;position:relative}
      .app{height:100%}
      .feed{bottom:62px}
    }
    @media (max-width:559px){ .phone{height:100vh; position:relative} }
  </style>
</head>
<body>
  <div class="stars"></div>

  <!-- ===== LOGIN ===== -->
  <div id="authWrap" class="auth-wrap">
    <div class="auth-card">
      <div class="auth-header">
<div class="auth-logo">
  <img src="https://files.catbox.moe/296pyr.jpg" alt="Logo ARDS V14" style="width:60px;height:60px;border-radius:14px;object-fit:cover;">
</div>
        <div class="title">ARDS V14</div>
        <div class="subtitle">WELCOME TO LOGIN PORTAL ARDS V14<br/></div>
      </div>

      <div class="field">
        <div class="label">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
          Username
        </div>
        <div class="ipt"><input id="authUsername" placeholder="Enter username"/></div>
      </div>
      <div class="field">
        <div class="label">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 17a5 5 0 0 0 5-5V7a5 5 0 0 0-10 0v5a5 5 0 0 0 5 5z"/><path d="M19 11H5"/></svg>
          Password
        </div>
        <div class="ipt"><input id="authPassword" type="password" placeholder="Enter password"/></div>
      </div>

      <label class="remember"><input id="rememberMe" type="checkbox"> Ingatkan</label>
      <button id="btnLogin" class="btn-grad">ACCESS SYSTEM</button>
      <div id="authMsg" class="muted-center allow-select"></div>
    </div>
  </div>

  <!-- ===== APP ===== -->
  <div id="appWrap" class="phone" hidden>
    <div class="app">
      <header class="topbar">
        <button class="icon-btn" aria-label="Menu">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><line x1="3" y1="6" x2="21" y2="6"/><line x1="3" y1="12" x2="21" y2="12"/><line x1="3" y1="18" x2="21" y2="18"/></svg>
        </button>
        <div><div class="brand">ARDS V14</div><small style="color:#7fbfff">dashboard</small></div>
        <div style="flex:1"></div>
        <button class="icon-btn" onclick="logout()" aria-label="Logout">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg>
        </button>
      </header>

      <main class="content">
        <section class="panel hero">
          <img src="https://files.catbox.moe/msna5n.jpg?q=80&w=1200&auto=format&fit=crop" alt="header"/>
        </section>

        <div id="views">
          <br>
          <!-- HOME -->
          <section id="home" class="page active">
            <div class="cards">
              <div class="card">
                <h3>Server Stats</h3>
                <div class="stat">
                  <div style="display:flex;align-items:center;gap:.55rem">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2"/><circle cx="12" cy="7" r="4"/></svg>
                    <div><div style="font-weight:700;font-size:.92rem">Online Users</div><small style="color:var(--tx-2)">Real-time</small></div>
                  </div>
                  <div style="display:flex;align-items:center;gap:.45rem"><span class="status-dot"></span> <strong id="uCount">82</strong></div>
                </div>
                <div class="stat">
                  <div style="display:flex;align-items:center;gap:.55rem">
                    <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/><polyline points="7 10 12 15 17 10"/><line x1="12" y1="15" x2="12" y2="3"/></svg>
                    <div><div style="font-weight:700;font-size:.92rem">Active Sender</div><small style="color:var(--tx-2)">Last 60s</small></div>
                  </div>
                  <div style="display:flex;align-items:center;gap:.45rem"><span class="status-dot" style="background:var(--warn);box-shadow:0 0 10px var(--warn)"></span> <strong id="aCount">9</strong></div>
                </div>
              </div>
            </div>
            <div style="height:56px"></div>
          </section>
<br>
          <!-- BUG WA -->
          <section id="bug" class="page">
            <div class="cards">
              <div class="card">
                <h3>Attack • Bug WA</h3>
                <small style="color:var(--tx-2)">.</small>
                <div style="height:.5rem"></div>
                <div style="display:flex;gap:.55rem;flex-wrap:wrap">
                  <input id="waNumber" type="tel" inputmode="numeric" pattern="\\+?\\d{9,15}" placeholder="+62812xxxxxxx" style="flex:1;padding:.65rem .85rem;border-radius:12px;border:1px solid #1d2a57;background:transparent;color:#9fd9ff;min-width:220px">
                  <select id="bugType" style="padding:.65rem .85rem;border-radius:12px;border:1px solid #1d2a57;background:transparent;color:#9fd9ff">
                    <option value="Bug 1 — Delay Message">Bug 1 — Delay Message</option>
                    <option value="Bug 2 — Sender Loop">Bug 2 — Sender Loop</option>
                    <option value="Bug 3 — Ghost Notification">Bug 3 — Ghost Notification</option>
                    <option value="Bug 4 — Sticker Flood">Bug 4 — Sticker Flood</option>
                    <option value="Bug 5 — Media Spam">Bug 5 — Media Spam</option>
                  </select>
                  <button class="btn-grad" onclick="startProgress('Attack • Bug WA')">Mulai</button>
                </div>
              </div>
            </div>
          </section>
<br>
          <!-- DDoS (mock) -->
          <section id="ddos" class="page">
            <div class="cards"><div class="card">
              <h3>DDoS</h3>
              <small style="color:var(--tx-2)">Masukkan URL target (wajib) — tampilan saja.</small>
              <div style="height:.5rem"></div>
              <div style="display:flex;gap:.55rem;flex-wrap:wrap">
                <input id="ddosUrl" type="url" placeholder="https://contoh.com" style="flex:1;padding:.65rem .85rem;border-radius:12px;border:1px solid #1d2a57;background:transparent;color:#9fd9ff;min-width:220px"/>
                <select style="padding:.65rem .85rem;border-radius:12px;border:1px solid #1d2a57;background:transparent;color:#9fd9ff">
                  <option>Mode Fast</option><option>Mode Slow</option>
                </select>
                <button class="btn-grad" onclick="startProgress('DDoS')">Run</button>
              </div>
            </div></div>
          </section>

          <!-- Track IP (mock) -->
          <section id="track" class="page">
            <div class="cards"><div class="card">
              <h3>Track IP (Mock)</h3>
              <div style="display:flex;gap:.55rem;flex-wrap:wrap">
                <input id="ipInput" placeholder="192.0.2.1" style="flex:1;padding:.65rem .85rem;border-radius:12px;border:1px solid #1d2a57;background:transparent;color:#9fd9ff;min-width:220px"/>
                <button class="btn-grad" onclick="startProgress('Track IP')">Lookup</button>
              </div>
            </div></div>
          </section>
        </div>
      </main>

      <nav class="bottombar">
        <button class="tab active" onclick="switchTab(this); go('home')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M3 12l9-9 9 9"/><path d="M9 21V9h6v12"/></svg><small>Home</small>
        </button>
        <button class="tab" onclick="switchTab(this); go('bug')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M12 2l3 7h7l-5.5 4 2 7-6.5-4.5L5.5 20l2-7L2 9h7z"/></svg><small>Bug WA</small>
        </button>
        <button class="tab" onclick="switchTab(this); go('ddos')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><rect x="3" y="4" width="18" height="12" rx="2"/><path d="M7 20h10"/></svg><small>DDoS</small>
        </button>
        <button class="tab" onclick="switchTab(this); go('track')">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 12-9 12S3 17 3 10a9 9 0 1 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg><small>Track IP</small>
        </button>
        <button class="tab" onclick="logout()">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="16 17 21 12 16 7"/><line x1="21" y1="12" x2="9" y2="12"/></svg><small>Logout</small>
        </button>
      </nav>

      <!-- Feed notifikasi -->
      <div id="feed" class="feed" aria-live="polite"></div>
    </div>
  </div>

  <!-- Modal Progress -->
  <div id="progressModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <strong id="mTitle">Running</strong>
      <div class="progress"><i id="bar"></i></div>
      <div class="meta"><span id="left">20s left</span><span id="state">Preparing...</span></div>
      <div class="indicator" id="indicator">Status: Waiting</div>
      <button class="btn-close" onclick="closeProgress()">Close</button>
    </div>
  </div>

  <!-- Modal Success -->
  <div id="successModal" class="modal" aria-hidden="true">
    <div class="modal-card">
      <strong>Success!</strong>
      <p id="successText">Login berhasil. Selamat datang.</p>
      <button class="btn-close" onclick="closeSuccess()">OK</button>
    </div>
  </div>

  <!-- Anti-copy/zoom keyboard + UI helpers -->
  <script>
    // Anti copy/zoom
    document.addEventListener('contextmenu', e => e.preventDefault());
    document.addEventListener('copy', e => e.preventDefault());
    document.addEventListener('cut', e => e.preventDefault());
    document.addEventListener('selectstart', e => {
      const t=(e.target.tagName||'').toUpperCase();
      if(t!=='INPUT' && t!=='TEXTAREA' && !e.target.classList.contains('allow-select')) e.preventDefault();
    });
    document.addEventListener('wheel', e => { if(e.ctrlKey) e.preventDefault(); }, {passive:false});
    document.addEventListener('keydown', e => { if(e.ctrlKey && ['+','-','0'].includes(e.key)) e.preventDefault(); });

    // Tabs & pages
    function switchTab(el){ document.querySelectorAll('.tab').forEach(b=>b.classList.remove('active')); el.classList.add('active'); }
    function go(id){ document.querySelectorAll('.page').forEach(p=>p.classList.remove('active')); document.getElementById(id).classList.add('active'); }

    // Counters demo
    setInterval(()=>{
      const u=document.getElementById('uCount'), a=document.getElementById('aCount');
      if(!u||!a) return; u.textContent=70+Math.floor(Math.random()*30); a.textContent=5+Math.floor(Math.random()*7);
    },1800);

    // ===== NOTIF (tiap 4 detik) =====
    const feed = document.getElementById('feed');
    const titles = [
      'Akun berhasil dibanned','Bug WA berhasil dieksekusi',
      'Spam media berhasil dikirim','Delay message aktif','Ghost notification terdeteksi'
    ];
    const bodies = [
      n=>`Akun ${n} berhasil dibanned permanen`,
      n=>`Target ${n} menerima burst notifikasi`,
      n=>`Target ${n} terkena flood media`,
      n=>`Target ${n} mengalami delay pesan`,
      n=>`Nomor ${n} memunculkan ghost notif`
    ];
    function r(min,max){return Math.floor(Math.random()*(max-min+1))+min}
    function maskPhone(){
      const p=['+62 81','+62 82','+62 83','+62 85','+62 87','+62 88','+62 89'][r(0,6)];
      const mid=r(100,999), tail=r(1000,9999);
      return `${p}${r(0,9)} ${mid}-****-${String(tail)}`;
    }
    function note(){
      const i=r(0,titles.length-1), num=maskPhone();
      const n=document.createElement('div'); n.className='note';
      n.innerHTML=`
        <div class="top">
          <div class="tag">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M21 10c0 7-9 12-9 12S3 17 3 10a9 9 0 1 1 18 0z"/><circle cx="12" cy="10" r="3"/></svg>
            ARDS V14 Notify
          </div>
          <div class="when">baru saja</div>
        </div>
        <div class="msg"><strong>${titles[i]}</strong><br>${bodies[i](num)}</div>`;
      feed.prepend(n); setTimeout(()=>n.classList.add('hide'),3500); setTimeout(()=>n.remove(),3800);
    }
    setInterval(note,4000);

    // ===== Progress Modal (20s) =====
    const pm = document.getElementById('progressModal'),
          bar = document.getElementById('bar'),
          left = document.getElementById('left'),
          state = document.getElementById('state'),
          ind = document.getElementById('indicator'),
          mTitle = document.getElementById('mTitle');
    let timer=null;

    function startProgress(kind){
      // Validasi input
      if(kind.includes('Bug WA')){
        const n=document.getElementById('waNumber');
        if(!n.value.trim()){ showToast('Nomor target wajib diisi'); return; }
      }
      if(kind==='DDoS'){
        const u=document.getElementById('ddosUrl');
        if(!u.value.trim()){ showToast('URL target wajib diisi'); return; }
        try{ new URL(u.value); }catch{ showToast('Format URL tidak valid'); return; }
      }
      mTitle.textContent=kind;
      bar.style.width='0%'; left.textContent='20s left'; state.textContent='Preparing...'; ind.textContent='Status: In progress';
      pm.classList.add('show');
      let s=0,total=20; clearInterval(timer);
      timer=setInterval(()=>{
        s++; bar.style.width=Math.round((s/total)*100)+'%';
        left.textContent=(total-s)+'s left';
        if(s===6) state.textContent='Processing...';
        if(s===13) state.textContent='Finalizing...';
        if(s>=total){ clearInterval(timer); state.textContent='Complete'; ind.textContent='Status: Completed'; setTimeout(()=>pm.classList.remove('show'),800); }
      },1000);
    }
    function closeProgress(){ clearInterval(timer); pm.classList.remove('show'); }

    // kecil toast info
    let tt; function showToast(msg){
      let t=document.getElementById('toast');
      if(!t){ t=document.createElement('div'); t.id='toast'; t.style.cssText='position:fixed;left:50%;bottom:88px;transform:translateX(-50%) translateY(14px);background:#0f1736;border:1px solid #1d2a57;border-radius:12px;padding:.55rem .8rem;box-shadow:0 12px 24px #0008;opacity:0;transition:.2s;z-index:80;font-size:.9rem'; document.body.appendChild(t); }
      t.textContent=msg; t.style.opacity='1'; t.style.transform='translateX(-50%) translateY(0)';
      clearTimeout(tt); tt=setTimeout(()=>{ t.style.opacity='0'; t.style.transform='translateX(-50%) translateY(14px)'; },1800);
    }

    // Success modal (dipakai saat login)
    function showSuccess(msg){ document.getElementById('successText').textContent = msg||'Success'; document.getElementById('successModal').classList.add('show'); }
    function closeSuccess(){ document.getElementById('successModal').classList.remove('show'); }
  </script>

  <!-- Firebase Auth (login only, username -> @gmail.com) -->
  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
    import {
      getAuth, onAuthStateChanged, signInWithEmailAndPassword, signOut,
      setPersistence, browserSessionPersistence
    } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyArE6B5jQCSECpOusTxrOYmUsjeFEa17YI",
      authDomain: "bugwa-1fc47.firebaseapp.com",
      projectId: "bugwa-1fc47",
      storageBucket: "bugwa-1fc47.firebasestorage.app",
      messagingSenderId: "309575475227",
      appId: "1:309575475227:web:c2a7a9123afb30023698be"
    };

    const app = initializeApp(firebaseConfig);
    const auth = getAuth(app);

    await setPersistence(auth, browserSessionPersistence).catch(()=>{});
    try{ await signOut(auth);}catch(_){}

    const authWrap=document.getElementById('authWrap');
    const appWrap =document.getElementById('appWrap');
    const msgEl   =document.getElementById('authMsg');
    const uEl     =document.getElementById('authUsername');
    const pEl     =document.getElementById('authPassword');

    let userInteracted=false;
    const asEmail=(u)=> (u||"").trim()? (u.trim()+"@gmail.com"):null;

    async function doLogin(){
      userInteracted=true; msgEl.textContent="";
      const email=asEmail(uEl.value); const pass=pEl.value;
      if(!email){ msgEl.textContent="Username wajib diisi"; userInteracted=false; return; }
      if(!pass){ msgEl.textContent="Password wajib diisi"; userInteracted=false; return; }
      try{
        await signInWithEmailAndPassword(auth,email,pass);
        showSuccess('Login berhasil. Selamat datang.');
      }catch(e){
        msgEl.textContent="Login gagal. Periksa username / password.";
        userInteracted=false;
      }
    }
    document.getElementById('btnLogin').addEventListener('click', doLogin);

    onAuthStateChanged(auth,(user)=>{
      if(user && userInteracted){
        authWrap.style.display="none";
        appWrap.hidden=false;
      }else{
        appWrap.hidden=true;
        authWrap.style.display="grid";
      }
    });

    window.logout = async()=>{ try{ await signOut(auth);}catch(_){ } finally{ userInteracted=false; appWrap.hidden=true; authWrap.style.display="grid"; } };
  </script>
</body>
</html>